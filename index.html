<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Spotipi For StreamPi</title>
    <meta name="author" content="dmf444">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


  </head>
  <body style="height: 100vh">
		<div class="container-fluid" style="height: 100%">
			<div class="row justify-content-center align-items-center" style="height: 100%">
				<div class="col-6 align-self-center">
					<div class="card bg-default">
						<div class="d-flex justify-content-center">
							<img src="./app_icon.png" class="card-img-top" alt="StreamPi logo" style="height: 50%; width: 50%">
						</div>
						<div class="card-body">
							<h5 class="card-title">Success! (or maybe not)</h5>
							<p class="card-text">Almost done! Copy this back into StreamPi as the token! If the button is disabled, your auth probably failed...</p>
							<div class="input-group">
							  <input id="inputPoint" type="text" class="form-control" placeholder="" disabled>
							  <button id="catchButton" class="btn btn-outline-secondary" type="button" onclick="onBtnClicked()" disabled>Copy to clipboard!</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
  </body>
  <script>
	var url = new URL(window.location.href);
	var codeVal = url.searchParams.get("code");
	if(codeVal !== null) {
		document.getElementById("inputPoint").value = codeVal;
		document.getElementById("catchButton").disabled = false;
	}
	
	function onBtnClicked() {
		var copyText = document.getElementById("inputPoint");

		/* Copy the text inside the text field */
		navigator.clipboard.writeText(copyText.value);

	}
	
  </script>
</html>